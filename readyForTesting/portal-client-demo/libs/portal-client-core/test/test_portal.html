<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
    <script src="./dojoConfig.js"></script>
    <link rel="stylesheet" href="../libs/font-awesome/css/font-awesome.css"/>
    <script type="text/javascript" src="../libs/dojo/dojo.js"></script>
</head>
<body  class="yeti"  style="margin: 0px;">
    <div id="app"></div>
    <script type="text/javascript">
        require([
            'dojo/promise/all',
            'test/data/applications',
            'test/data/dashboards',
            'test/data/users',
            'dstore/Memory',
            'portal',
            'portal/_base/store/PortalStore',
            'dojo/domReady!'
        ], function (all, applications,dashboards,users, Memory, portal,PortalStore) {

            PortalStore.setStore('memory');
            PortalStore.users._currentUser = users.PortalAdmin;
            applications.app1.localDataId=applications.app1.key;
            applications.app2.localDataId=applications.app2.key;
            all([
                PortalStore.appStore.installApplication(applications.app1),
                PortalStore.appStore.installApplication(applications.app2),
                PortalStore.dashboards.installDashboard(dashboards.gridDash1),
                PortalStore.dashboards.installDashboard(dashboards.rasterDash1),
                PortalStore.dashboards.installDashboard(dashboards.freeDash1),
                PortalStore.dashboards.installDashboard(dashboards.freeDash2)
            ]).then(function(){
                var p = new portal({
                    defaultTheme:'yeti',
                    defaultApp:'testApp3'
                }, 'app');
                p.startup();
            });
        });
    </script>
</body>
</html>