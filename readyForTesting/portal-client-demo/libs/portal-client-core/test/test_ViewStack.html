<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
    <script src="./dojoConfig.js"></script>
    <script type="text/javascript" src="../libs/dojo/dojo.js"></script>
    <script type="text/javascript">

        require([
            'test/tools/DijitRegistryPane',
            'portal/_base/store/PortalStore',
            'portal/_base/viewWrappers/ViewWrapper',
            'portal/_base/common/ViewStack',
            'dojo/dom',
            'portal/_base/common/Util',
            'dijit/layout/ContentPane',
            'test/widgets/ContentWidget',
            'dojo/_base/declare',
            'dijit/_WidgetBase',
            'dijit/_TemplatedMixin',
            'dijit/_WidgetsInTemplateMixin',
            'dijit/layout/BorderContainer',
            'portal/_base/common/Wrapper',
            'yeti',
            'dojo/domReady!'
        ], function (DijitRegistryPane,PortalStore, ViewWrapper, ViewStack, dom, Util, ContentPane, ContentWidget,declare, WidgetBase, TemplatedMixin, WidgetsInTemplateMixin, BorderContainer, Wrapper) {
            PortalStore.setStore('memory');

            var vs = new ViewStack({},'p1');
            vs.startup();
            for(var i=0;i<10;i++){
                vs.addChild(new ViewWrapper({
                    viewId:'testId'+i,
                    key:'testView'+i,
                    model:{
                        id:'testId'+i,
                        viewType:'test/views/ContentView',
                        label:'test view',
                        iconClass:'fa fa-users',
                        config:{
                            content:'content for view'+i
                        }
                    }
                }))
            }
            // test for switch and performance.

            new DijitRegistryPane().startup();

            var rand=0;
            setInterval(function(){
                rand >= 9 ?rand =0:rand++;
                var randomViewKey='testView'+rand;
                vs.select(randomViewKey);
                dom.byId('viewKey').innerHTML=randomViewKey;
            },1000)
        });
    </script>
    <link rel="stylesheet" href="../libs/font-awesome/css/font-awesome.css"/>
</head>
<body  class="yeti"  style="margin: 0px;">
    <div >viewKey <span id="viewKey"></span></div>
    <div id="p1" style="height: 400px;border: 2px solid grey;"></div>
</body>
</html>
