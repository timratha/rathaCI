<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
    <script src="./dojoConfig.js"></script>
    <script type="text/javascript" src="../libs/dojo/dojo.js"></script>
    <script type="text/javascript">

        require([
            'dojo/hash',
            'portal/_base/common/PortalHashHelper',
            'dojo/topic',
            'test/views/BookInfoView',
            'portal/_base/store/PortalStore',
            'portal/_base/viewWrappers/ViewWrapper',
            'portal/_base/common/ViewStack',
            'dojo/dom',
            'portal/_base/common/Util',
            'dijit/layout/ContentPane',
            'test/widgets/ContentWidget',
            'dojo/_base/declare',
            'dijit/_WidgetBase',
            'dijit/_TemplatedMixin',
            'dijit/_WidgetsInTemplateMixin',
            'dijit/layout/BorderContainer',
            'portal/_base/common/Wrapper',
            'yeti',
            'dojo/domReady!'
        ], function (hash, PortalHashHelper, topic, BookInfoView,PortalStore, ViewWrapper, ViewStack, dom, Util, ContentPane, ContentWidget,declare, WidgetBase, TemplatedMixin, WidgetsInTemplateMixin, BorderContainer, Wrapper) {
            hash('');

            PortalStore.setStore('memory');

            var vs = new ViewStack({},'p1');
            vs.startup();


            vs.addChild(new ViewWrapper({
                viewId:'jsdf-dfsi-jleg',
                key:'bookInfo',
                model:{
                    id:'testId',
                    viewType:BookInfoView,
                    label:'test view',
                    iconClass:'fa fa-users',
                    config:{
                        copyright:"@People's Literature Publishing House"
                    }
                }
            }))
            topic.subscribe('/dojo/hashchange',function(){
                vs.select(PortalHashHelper.getViewKey());
            })
            setTimeout(function(){
                hash('test/bookInfo?name=testName&author=john')
            },1000)
        });
    </script>
    <link rel="stylesheet" href="../libs/font-awesome/css/font-awesome.css"/>
</head>
<body  class="yeti"  style="margin: 0px;">
    <div>
        <div>Hash Total Number:<span id="HashTotalNumber"></span></div>
        <div>This number should be stable, not always increase:</div>
    </div>
    <div >viewKey <span id="viewKey"></span></div>
    <div id="p1" style="height: 400px;border: 2px solid grey;"></div>
</body>
</html>
