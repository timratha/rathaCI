<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
    <script src="./dojoConfig.js"></script>
    <script type="text/javascript" src="../libs/dojo/dojo.js"></script>
    <script type="text/javascript">
        global ={};
        require([
            'portal/_base/widgetWrappers/WidgetWrapperBase',
            'portal/_base/store/PortalStore',
            'portal/_base/widgetWrappers/DialogWidgetWrapper',
            'test/data/users',
            'yeti',
            'dojo/domReady!'
        ], function (WidgetWrapperBase,PortalStore,DialogWidgetWrapper,users) {

            PortalStore.setStore('memory');
            PortalStore.users._currentUser = users.basicUser;

            new WidgetWrapperBase({
                model: {
                    widgetType:'test/widgets/ContentWidget',
                    label:'test widget',
                    iconClass:'fa fa-users',
                    config:{
                        content:'success: set model to constructor'
                    }
                }
            },'cp1').startup();


            PortalStore.appStore.installWidget( {
                widgetType:'test/widgets/ContentWidget',
                label:'test widget',
                iconClass:'fa fa-users',
                config:{
                    content:'success: load model from widget id, and content will be sync'
                }
            }).then(function(w){

                window.wp1 = new WidgetWrapperBase({
                    widgetId: w.id
                },'cp2');
                window.wp1.startup();


                window.wp2 = new WidgetWrapperBase({
                    widgetId: w.id
                },'cp3');
                window.wp2.startup();

                var dw = window.dw = new DialogWidgetWrapper({
                    sendAble:false,
                    widgetId: w.id
                });
                dw.startup();
                dw.show();

            });

        });
    </script>
    <link rel="stylesheet" href="../libs/font-awesome/css/font-awesome.css"/>
</head>
<body  class="yeti"  style="margin: 0px;">
    <div id="cp1"></div>
    <div id="cp2"></div>
    <div id="cp3"></div>
</body>
</html>