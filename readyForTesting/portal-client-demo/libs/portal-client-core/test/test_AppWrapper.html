<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
    <script src="./dojoConfig.js"></script>
    <script type="text/javascript" src="../libs/dojo/dojo.js"></script>
    <style>
        html,body,#app{
            width: 100%;height: 100%;
        }
    </style>
    <script type="text/javascript">
        require(['yeti'],function(){
            // request yeti first to patch the bug of yeti when load slower then portal.
            // make the iconSupport.js already work
            require([
                'dojo/topic',
                'portal/_base/common/AppWrapper',
                'dojo/promise/all',
                'test/data/applications',
                'dstore/Memory',
                'portal/_base/store/PortalStore',
                'portal/_base/common/Application',
                'dojo/domReady!',
                'yeti'
            ], function (topic, AppWrapper, all, applications,Memory,PortalStore,Application) {

                PortalStore.setStore('memory');

                all([
                    PortalStore.appStore.installApplication(applications.app1)
                ]).then(function(){
                    PortalStore.appStore.getAppByKey(applications.app1.key).then(function(appModel){
                        var app = new AppWrapper({
                            model:appModel
                        }, 'app');
                        app.startup();
                        topic.subscribe('/dojo/hashchange',function(){
                            app.instance.switchViewToHash();
                        });

                    })
                });
            });
        })
    </script>
    <link rel="stylesheet" href="../libs/font-awesome/css/font-awesome.css"/>
</head>
<body  class="yeti"  style="margin: 0px;">
    <div id="app" ></div>
</body>
</html>