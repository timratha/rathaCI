<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
    <style>
        html,body{
            width:100%;
            height: 100%;
        }
    </style>
    <script src="./dojoConfig.js"></script>
    <script type="text/javascript" src="../libs/dojo/dojo.js"></script>
    <script type="text/javascript">

        require([
            'dojo/parser',
            'dijit/registry',
            'dojo/json',
            'test/data/dashboards',
            'portal/_base/store/PortalStore',
            'portal/_base/viewWrappers/DashboardWrapper',
            'yeti',
            'dojo/domReady!',
            'dijit/form/Textarea'
        ], function (parser, registry, json, dashboards,PortalStore,DashboardWrapper) {
            parser.parse();
            PortalStore.setStore('memory');

            PortalStore.dashboards.installDashboard(dashboards.gridDash2).then(function(dash){
                console.debug('dashboard:',dash);
                var wrapper=new DashboardWrapper({
                    viewId:dash.id
                },'cp1');
                wrapper.startup();
            });
            PortalStore.dashboards.on('update',function(e){
                registry.byId('json').set('value',json.stringify(e.target,null,'\t'));
            })
        });
    </script>
    <link rel="stylesheet" href="../libs/font-awesome/css/font-awesome.css"/>
</head>
<body  class="yeti"  style="margin: 0px;">
    <div id="cp1" style="width: 50%;height:100%;display: inline-block;"></div>
    <div id="json" data-dojo-type="dijit/form/Textarea" style="width: 45%;height:100%;max-height:100%;display: inline-block;vertical-align: top;padding: 10px;"></div>
</body>
</html>